{%- extends "base.html" -%}

{% block title %}Your cookie configuration{% endblock %}

{% block header_h1 %}<h1><a href="{{ url_for('.home') }}">{{ config['BROWSE_SITE_LABEL'] }}</a> &gt; cookies</h1>{% endblock header_h1 %}

{%- block content %}
<h1>Your cookie configuration for arXiv</h1>

<p> Cookies are snippets of information
stored on your machine and returned to our site with each request you make (click
show additional debugging information below to see what is stored). These are stored locally
by whatever browser you're using. If you switch browsers, or use a different computer, your cookies won't follow you.</p>

arXiv uses cookies to
<ul>
  <li>Save information about your account, iff you've logged into your arXiv account</li>
  <li>Save preferences you may have set for your use of arXiv. This includes, but is not limited to:</li>
  <ul>
    <li>That you have dismissed a banner we may have shown you.</li>
    <li>Which Labs integrations you want to see on each abstract page.</li>
    <li>Whether you want MathJax to be used when rendering article abstracts. (set on this page.)</li>
  </ul>
</ul>

We do not use cookies to track your use of arXiv, or to customize the content we show you (that is, we don't do ads).
The cookes we do use are considered "essential" cookies, which allows us to avoid showing pop-up consent banners in those
juristictions that might perscribe such measures for non-essential cookies.
<hr />

<form action="{{form_url}}" method="post">
  {% for cc in cookies_config %}
    {% set id = cc['id'] %}
    {% set label = cc['label'] %}
    {% set name = cc['name'] %}
    {% set options = cc['options'] %}

    <br>{{label}}<select name="{{id}}">
        {% for opt in options %}
          {% set value = opt[0] %}
          {% set opt_label = opt[1] %}
          {% set selected = opt[2] %}
          <option value="{{value}}"
                  {% if selected %}selected="selected"{% endif %}
                  >{{opt_label}}</option>
        {% endfor %}
    </select>
  {% endfor %}
  <input type="submit" name="set" value="Set" />
</form>

<hr />

{% if debug %}
<h2>Debugging information: dump of current cookie data</h2>
<table cellpadding="4" style="background: #666666; border: 0; padding: 5;"><tr>
    <th align="left" >Name</th><th align="left">Value</th></tr>
  {% for cooname in request.cookies.keys() %}
    <tr bgcolor="#EEEEEE">
      {% if cooname in controlled_cookies %}
        <td><em><code>{{cooname}}</code></em></td>
      {% else %}
        <td><code>{{cooname}}</code></td>
      {% endif %}
      <td><code>{{ request.cookies[cooname] }}</code></td>
    </tr>
    {% endfor %}
</table>

<p>Only those cookies shown <em>emphasized</em> in the table above are controlled
  by this interface. arXiv uses other cookies such as <code>browser</code> and
  <code>tapir_permanent</code> to maintain session and permanent login settings.
  You can, if you want, clear all cookies using the controls in your browser.</p>

<h2>Debugging information: dump of http request headers</h2>
<table cellpadding="4" style="background: #666666; border: 0; padding: 5;"><tr>
    <th align="left" >Name</th><th align="left">Value</th></tr>
  {% for headername in request.headers.keys() %}
    <tr bgcolor="#EEEEEE">
      <td><code>{{headername}}</code></td>
      <td><code>{{ request.headers[headername] }}</code></td>
    </tr>
    {% endfor %}
</table>

<p><small>(<a href="{{url_for('browse.cookies')}}">hide debugging information</a>)</small></p>
{% else %}
<p><small>(<a href="{{url_for('browse.cookies', debug=1)}}">show additional debugging information</a>)</small></p>
{% endif %}

<h2>About cookies</h2>
<p>&quot;HTTP Cookies&quot; allow clients to retain certain state
information to be included in future requests to a particular
server.  Cookies are now defined
by <a href="https://tools.ietf.org/html/rfc6265">RFC 6265</a>.  It is
not necessary to use/permit cookies to read articles on arXiv.org.</p>
{% endblock content %}
