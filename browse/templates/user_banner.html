{#- How to use the user_banner

The content() and script() macro get added to the base.html.

The content() elements will be added at the start of the <body> above the
header in base.html.

The script() elements will be added to the <head> in the base.html. This has
additonal CSS and JS files for the banner slide in and out effects.

In those macros are responsable for all checks of the start and end times. Make
sure to use the same date conditionals in the user_banner.content() macro and
the user_banner.script() macro.

This no longer uses env vars set in browse.config or httpd/conf/ng_flask.conf on
production.

Adding an environment var, so we can enable only on gcp.
-#}

{# Set these variables to a string of YYYYMMDD of the start and end date #}
{% set BANNER_START = '20240712' %}
{% set BANNER_END = '20240914' %}


{%- macro content(request_datetime) -%}
{%- set rd_int = request_datetime.strftime("%Y%m%d%H%M")|int -%}
{%- if (BANNER_START <= request_datetime.strftime('%Y%m%d')) and (BANNER_END > request_datetime.strftime('%Y%m%d')) %}
  {%- if rd_int >= 202407220100 and rd_int <= 202407290100 -%}
  <!-- July 22 - 29 -->
  <aside class="slider-wrapper bps-banner forum">
    <a class="close-slider bps-banner" href="#"><img src="{{ url_for('static', filename='images/icons/close-slider.png') }}" alt="close this message"></a>
  	<div class="columns">
      <img role="presentation" class="bps-banner-image" src="{{ url_for('static', filename='images/icons/smileybones-pixel.png') }}" alt="arXiv Accessibility Forum 2024">
      <div class="copy-donation bps-banner">
        <h2>Help spread the word</h2>
        <p>The arXiv Accessibility Forum takes place this September. Free, fully remote and open to all. <a href="https://accessibility2024.arxiv.org/" target="_blank">Learn more and spread the word</a>.</p>
      </div>
      <div class="amount-donation bps-banner">
        <div class="wrapper">
          <div class="donate-cta"><a class="banner_link banner-btn-grad" target="_blank" href="https://accessibility2024.arxiv.org/"><b>Learn More</b></a></div>
        </div>
      </div>
    </div>
  </aside>

  {%- elif rd_int >= 202408140100 and rd_int <= 202408220100 -%}
  <!-- August 14 - 22 -->
  <aside class="slider-wrapper bps-banner forum">
    <a class="close-slider bps-banner" href="#"><img src="{{ url_for('static', filename='images/icons/close-slider.png') }}" alt="close this message"></a>
  	<div class="columns">
      <img role="presentation" class="bps-banner-image" src="{{ url_for('static', filename='images/events/arxiv-forum-logotype-title.png') }}" alt="arXiv Accessibility Forum 2024">
      <div class="copy-donation bps-banner">
        <h2>The arXiv Accessibility Forum begins September 3<sup>rd</sup></h2>
        <p>Free, fully remote and open to all. Because science is only open if it is accessible. <a href="https://accessibility2024.arxiv.org/" target="_blank">Learn more</a>. Because without accessibility Open Science is not truly open</p>
      </div>
      <div class="amount-donation bps-banner">
        <div class="wrapper">
          <div class="donate-cta"><a class="banner_link banner-btn-grad" target="_blank" href="https://accessibility2024.arxiv.org/schedule"><b>View Schedule</b></a></div>
        </div>
      </div>
    </div>
  </aside>

  {%- elif rd_int >= 202408280100 and rd_int <= 202409030100 -%}
  <!-- Aug 28 - Sept 2 -->
  <aside class="slider-wrapper bps-banner forum">
    <a class="close-slider bps-banner" href="#"><img src="{{ url_for('static', filename='images/icons/close-slider.png') }}" alt="close this message"></a>
  	<div class="columns">
      <img role="presentation" class="bps-banner-image" src="{{ url_for('static', filename='images/icons/smileybones-pixel.png') }}" alt="arXiv Accessibility Forum 2024">
      <div class="copy-donation bps-banner">
        <p>Join global leaders making scientific research more accessible. Free, fully remote and open to all. <a href="https://accessibility2024.arxiv.org/schedule" target="_blank">View the schedule</a> and <a href="https://cornell.ca1.qualtrics.com/jfe/form/SV_eEZ1d27LF2fVM7Y" target="_blank">signup</a>.</p>
      </div>
      <div class="amount-donation bps-banner">
        <div class="wrapper">
          <div class="donate-cta"><a class="banner_link banner-btn-grad" target="_blank" href="https://cornell.ca1.qualtrics.com/jfe/form/SV_eEZ1d27LF2fVM7Y"><b>Signup</b></a></div>
        </div>
      </div>
    </div>
  </aside>

  {%- elif rd_int >= 202409020100 and rd_int <= 202409131300 -%}
  <!-- Sept 3 - Sept 13, content filled in via dynamic script -->
  <aside class="slider-wrapper bps-banner forum">
    <a class="close-slider bps-banner" href="#"><img src="{{ url_for('static', filename='images/icons/close-slider.png') }}" alt="close this message"></a>
  	<div class="columns">
      <img role="presentation" class="bps-banner-image" src="{{ url_for('static', filename='images/events/arxiv-forum-logotype-title.png') }}" alt="arXiv Accessibility Forum 2024">
      <div class="copy-donation bps-banner">
        <h2 id="forum-session-title"></h2>
        <p id="forum-session-link-small"></p>
      </div>
      <div class="amount-donation bps-banner">
        <div class="wrapper">
          <div id="forum-session-link-box" class="donate-cta"></div>
        </div>
      </div>
    </div>
  </aside>
  <script src="{{ url_for('static', filename='js/rotate_forum_info.js')}}" type="text/javascript"></script>
  {%- endif -%}

{%- endif -%}
{%- endmacro -%}



{%- macro script(request_datetime) -%}
{%- if (BANNER_START <= request_datetime.strftime('%Y%m%d')) and (BANNER_END > request_datetime.strftime('%Y%m%d')) %}
  <link rel="stylesheet" type="text/css" media="screen" href="{{ url_for('static', filename='css/slider.css') }}?v=1.1" />
  <script src="//code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/donate.js') }}"></script>
{%- endif -%}
{%- endmacro -%}
